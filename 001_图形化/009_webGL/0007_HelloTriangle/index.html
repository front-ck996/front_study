<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="../WebGL-Programming-Guide/lib/webgl-utils.js"></script>
    <script src="../WebGL-Programming-Guide/lib/webgl-debug.js"></script>
    <script src="../WebGL-Programming-Guide/lib/cuon-utils.js"></script>
    <script src="./initVertexBuffers.js"></script>
</head>
<body onload="main()">
<canvas id="webgl" style="height: 400px;width: 400px"></canvas>
</body>
</html>
<script>
    var VSHADER_SOURCE =
        'attribute vec4 a_Position;' +
        'void main(){' +
        'gl_Position=a_Position;' +
        '}';

    var FSHADER_SOURCE =
        'void main(){' +
        'gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);' +
        '}';

    function main() {
        //获取canvas元素
        var canvas = document.getElementById("webgl");
        if (!canvas) {
            console.log("Failed to retrieve the <canvas> element");
            return;
        }

        //获取WebGL绘图上下文
        var gl = getWebGLContext(canvas);
        if (!gl) {
            console.log("Failed to get the rendering context for WebGL");
            return;
        }

        //初始化着色器
        if (!initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE)) {
            console.log("Failed to initialize shaders.");
            return;
        }

        //获取attribute变量存储位置
        // var a_Position = gl.getAttribLocation(gl.program, 'a_Position');
        var n = initVertexBuffers(gl)
        if (n < 0) {
            console.log("Failed to get the storage location of vertices");
            return;
        }


        //指定清空<canvas>颜色
        gl.clearColor(0.0, 0.0, 0.0, 1.0);

        //清空<canvas>
        gl.clear(gl.COLOR_BUFFER_BIT);
        gl.drawArrays(gl.TRIANGLES, 0 ,n)
    }

</script>
