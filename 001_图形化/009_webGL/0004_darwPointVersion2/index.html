<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="../WebGL-Programming-Guide/lib/webgl-utils.js"></script>
    <script src="../WebGL-Programming-Guide/lib/webgl-debug.js"></script>
    <script src="../WebGL-Programming-Guide/lib/cuon-utils.js"></script>
</head>
<body>
<canvas id="canvas" style="height: 400px;width: 400px"></canvas>
</body>
</html>
<script>
    function main() {
        var VSHADER_SOURCE =
            `
            attribute vec4 a_Position;
            void main() {
                gl_Position = a_Position;//设置坐标
                gl_PointSize = 10.0;//设置尺寸
             }
             `;

        //片元着色器程序
        var FSHADER_SOURCE =
            `
            void main(){
                gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);//设置颜色
            }`;

        // 获取 canvas 元素
        var canvas = document.getElementById('canvas')

        // 获得 WebGL 上下文
        var gl = getWebGLContext(canvas)
        if (!gl) {
            console.log('Failed to get the rendering context for WebGL')
            return;
        }
        // 初始化着色器
        if (!initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE)) {
            console.log('Failed to initialize shaders')
            return;
        }
        // 获取 attribute 的存储位置
        var a_Position = gl.getAttribLocation(gl.program, 'a_Position')
        console.log(a_Position)
        if (a_Position < 0){
            console.log('Failed to get the storage location of a_Position')
            return;
        }

        // 将顶点位置传递给 attribute 变量
        gl.vertexAttrib3f(a_Position, 0.3, 0.0, 0.0)

        // 设置清除背景色
        gl.clearColor(0.0, 0.0, 0.0, 1.0)

        // 清空 canvas
        gl.clear(gl.COLOR_BUFFER_BIT)

        // 绘制一个点
        gl.drawArrays(gl.POINTS, 0, 1)
    }

    main()
</script>
