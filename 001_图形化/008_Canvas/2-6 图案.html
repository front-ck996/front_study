<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<div id="radio">
    <input type="radio" id="repeatRadio" name="patternRadio">repeat
    <input type="radio" id="repeatXRadio" name="patternRadio">repeat-x
    <input type="radio" id="repeatYRadio" name="patternRadio">repeat-y
    <input type="radio" id="noRepeatYRadio" name="patternRadio"> no repeat
</div>
<canvas id="canvas" style="width: 400px;height: 300px;border:1px solid pink;box-sizing: border-box">
    Canvas not supported
</canvas>
</body>
</html>
<script>
    const canvas = document.getElementById('canvas'),
        context = canvas.getContext('2d'),
        repeatRadio = document.getElementById('repeatRadio'),
        noRepeatRadio = document.getElementById('noRepeatYRadio'),
        repeatXRadio = document.getElementById('repeatXRadio'),
        repeatYRadio = document.getElementById('repeatYRadio'),
        image = new Image()

    // 获取屏幕像素比
    const equipmentdevPixe = window.devicePixelRatio || 1
    canvas.width = canvas.clientWidth * equipmentdevPixe
    canvas.height = canvas.clientHeight * equipmentdevPixe


    function fillCanvasWithPattern(repeatString){
        console.log(repeatString)
        var pattern = context.createPattern(image, repeatString)
        context.clearRect(0,0, canvas.width, canvas.height)
        context.fillStyle = pattern
        context.fillRect(0,0, canvas.width, canvas.height)
        context.fill()
    }
    repeatRadio.onclick = function (e){
        fillCanvasWithPattern('repeat')
    }
    repeatXRadio.onclick = function (e){
        fillCanvasWithPattern('repeat-x')
    }
    repeatYRadio.onclick = function (e){
        fillCanvasWithPattern('repeat-y')
    }
    noRepeatRadio.onclick = function (e){
        fillCanvasWithPattern('no-repeat')
    }
    image.src = 'ballred.png'
    image.onload = function (){
     fillCanvasWithPattern('repeat')
    }
</script>
